{"title":"LabVIEW Notes","date":"2020-06-20T09:19:04.000Z","date_formatted":{"ll":"2020年6月20日","L":"2020/06/20","MM-DD":"06-20"},"link":"2020/06/20/LabVIEW-Notes","comments":true,"tags":["LabVIEW"],"updated":"2020-07-30T03:16:13.130Z","content":"<a id=\"more\"></a>\n\n<h2 id=\"一、概念\">一、概念<a href=\"#一、概念\" title=\"一、概念\"></a></h2><p>&nbsp;&nbsp;&nbsp;&nbsp;电子信息工程专业的学费没有白交，从CAD、matlab到quartus、modelsim、multisim，现在有学会一项labview，感觉5000块很值。大三下这个课设感觉是最有意思的，没有硬件，但是也要画电路图。这个课设的难度我感觉是在安装软件上，劳动节放假别人放假我安软件，电脑都濒临崩溃。软件难装、又大，网络一直失败，安装好只要将控件搭好，训练一下abc，就能够完成。做完感觉学到好多东西。以下好多来自官网的翻译。</p>\n<h3 id=\"11-视觉采集软件（vas）\">1.1 视觉采集软件（VAS）<a href=\"#11-视觉采集软件（vas）\" title=\"1.1 视觉采集软件（VAS）\"></a></h3><ul><li><p><strong>描述：</strong>视觉采集软件（VAS）是一组驱动程序和实用程序，用于采集，显示和保存各种摄像机类型的图像，包括使用GigE Vision，IEEE 1394（FireWire），USB 2.0，USB 3的摄像机Vision或Camera Link标准。</p></li><li><p><strong>所属模块：</strong> VAS包含在VDM和VBAI中</p></li><li><p><strong>用法：</strong> NI Vision Acquisition Software（VAS）附带的驱动程序允许您从各种摄像机获取，显示和保存图像。但是，只有NI VDM和NI VBAI软件包能够支持对高级图像处理和分析。</p></li><li><p><strong>组件：</strong> VAS由以下三个驱动程序组成。有关这些驱动程序的更多信息，请参阅<a href=\"https://knowledge.ni.com/KnowledgeArticleDetails?id=kA00Z0000019MEqSAM\" target=\"_blank\">NI-IMAQ，NI-IMAQdx和NI-IMAQ I / O之间的差异</a></p><ul><li>​ NI-IMAQ - 从National Instruments帧抓取器获取数据，以及具有常规显示，保存文件和采集数据等功能</li><li>NI-IMAQdx - 从GigE Vision、IEEE-1394相机、符合DirectShow标准的USB相机（VAS 2009及以上版本）以及一些IP相机中获取。</li><li>NI-IMAQ I / O - PCI-8254R，PCI-8255R等紧凑型视觉系统中包含的FPGA配置</li></ul></li></ul><h3 id=\"12-视觉开发模块（vdm）\">1.2 视觉开发模块（VDM）<a href=\"#12-视觉开发模块（vdm）\" title=\"1.2 视觉开发模块（VDM）\"></a></h3><ul><li><strong>描述：</strong>视觉开发模块（VDM）能为LabVIEW，C / C ++，Visual Basic和.NET环境提供机器视觉和图像处理功能</li><li><strong>所属模块：</strong> VDM是安装在LabVIEW中的单独许可模块</li><li><strong>组件：</strong> VDM 包括 视觉助手(Vision Assistant)工具，一个代码成型和生成工具，类似于NI 视觉生成器的菜单驱动界面。 视觉助手是一个用于开发和测试一系列图像分析和处理步骤，同时可以从中生成代码的工具。</li><li><strong>用法：</strong>通常，VDM功能用于图像处理和分析。其用途包括：模式匹配，粒子分析，边缘检测，阈值处理，直方图和光学字符识别。Windows和LabVIEW Real-Time支持视觉开发模块。这意味着您可以在远程目标上使用VDM，例如NI CVS（紧凑视觉系统）或NI智能相机。</li></ul><h3 id=\"13-用于自动检测的视觉生成器（vbai）\">1.3 用于自动检测的视觉生成器（VBAI）<a href=\"#13-用于自动检测的视觉生成器（vbai）\" title=\"1.3 用于自动检测的视觉生成器（VBAI）\"></a></h3><ul><li><strong>描述：</strong>用于自动检测的视觉生成器（VBAI）是一个独立的，可配置的机器视觉开发环境，无需编程知识就可使用。</li><li><strong>组件：</strong> VBAI包括100多种常用的视觉开发工具，包括模式匹配，光学字符识别和粒子分析。它还内置了VAS，用于从相机获取图像。</li><li><strong>用法：</strong> VBAI可以对远程目标（包括实时控制器和FPGA）执行图像处理检测，还可以用于配置这些环境。</li></ul><h4 id=\"14-下载地址\">1.4 下载地址<a href=\"#14-下载地址\" title=\"1.4 下载地址\"></a></h4><blockquote>\n<p><a href=\"http://search.ni.com/nisearch/app/main/p/bot/no/ap/tech/lang/zhs/pg/1/sn/ssnav:dwl/q/VAS/\" target=\"_blank\">http://search.ni.com/nisearch/app/main/p/bot/no/ap/tech/lang/zhs/pg/1/sn/ssnav:dwl/q/VAS/</a></p>\n</blockquote>\n<h2 id=\"二、遇到的问题\">二、遇到的问题<a href=\"#二、遇到的问题\" title=\"二、遇到的问题\"></a></h2><h3 id=\"21-问题：-安装imaq和imaqdx成功，但是在labview中没有显示imaqdx？\">2.1 问题： 安装IMAQ和IMAQdx成功，但是在labview中没有显示IMAQdx？<a href=\"#21-问题：-安装imaq和imaqdx成功，但是在labview中没有显示imaqdx？\" title=\"2.1 问题： 安装IMAQ和IMAQdx成功，但是在labview中没有显示IMAQdx？\"></a></h3><p><img src=\"/2020/06/20/LabVIEW-Notes/1.jpg\" class=\"φcy\"></p>\n<p><strong>解决方法：</strong></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;打开电脑【面板控制】-【程序与功能】-【National instruments software】查看是否有要更新的，有的话更新重启，还不行就选择NI-IMAQdx-【修复】</p>\n<p><img src=\"/2020/06/20/LabVIEW-Notes/2.png\" class=\"φcy\"></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;依然没有NI-IMAQdx，就是因为NI-IMAQdx没有破解。</p>\n<p>官网解释：</p>\n<p><img src=\"/2020/06/20/LabVIEW-Notes/3.png\" class=\"φcy\"></p>\n<h3 id=\"22-如何破解？\">2.2 如何破解？<a href=\"#22-如何破解？\" title=\"2.2 如何破解？\"></a></h3><ul><li><p>工具：NI LicensesActivator</p></li><li><p>CSDN免费下载：</p><blockquote><p><a href=\"https://download.csdn.net/download/hefangli07/10802591\" target=\"_blank\">https://download.csdn.net/download/hefangli07/10802591</a></p></blockquote></li><li><p>教程说明：</p><blockquote><p><a href=\"http://visionbbs.com/thread-490-1-1.html?tdsourcetag=s_pctim_aiomsg\" target=\"_blank\">http://visionbbs.com/thread-490-1-1.html?tdsourcetag=s_pctim_aiomsg</a></p></blockquote></li></ul><h3 id=\"23-问题：安装后运行grabvi和imaqdx例程都失败？保存详情：\">2.3 问题：安装后运行Grab.vi和IMAQdx例程都失败？保存详情：<a href=\"#23-问题：安装后运行grabvi和imaqdx例程都失败？保存详情：\" title=\"2.3 问题：安装后运行Grab.vi和IMAQdx例程都失败？保存详情：\"></a></h3><ul><li>IMAQ(待解决):</li></ul><p><img src=\"/2020/06/20/LabVIEW-Notes/6.png\" class=\"φcy\"></p>\n<ul><li>IMAQdx：</li></ul><p><img src=\"/2020/06/20/LabVIEW-Notes/5.png\" class=\"φcy\"></p>\n<p>解决方法：</p>\n<ol><li>我先找到NI MAX查看笔记本摄像头是否存在：</li></ol><p><img src=\"/2020/06/20/LabVIEW-Notes/4.png\"><img src=\"/2020/06/20/LabVIEW-Notes/5.jpg\" class=\"φcy\"></p>\n<ol><li><p>结果是存在的，将例程中的Interface Name改成cam0，IMAQ INIT.VI中的Interface Name也改成cam0，运行依然失败。</p></li><li><p>后面感觉是版本问题。labview2018，IMAQ和IMAQdx都是2019的，重装成2019的IMAQdx就成功了，但是IMAQ例子运行依然失败</p></li><li><p>注意：安装Vas和Vdm要注意顺序，要先有Labview编程软件，再安装vas和vdm，不然软件会识别不到。</p></li><li><p>官网解释：这个错误常常产生于IMAQ Init VI被调用但是却没有正确的接口名称。</p></li><li><p>但是我将NI MAX 中相机名称改成例程所示img0，运行依然失败。可能是IMAQ不支持笔记本相机。</p></li></ol><h3 id=\"24-问题：摄像头如何打开和关闭？\">2.4 问题：摄像头如何打开和关闭？<a href=\"#24-问题：摄像头如何打开和关闭？\" title=\"2.4 问题：摄像头如何打开和关闭？\"></a></h3><p>​    &nbsp;&nbsp;&nbsp;&nbsp;循环内停止程序也算是停止摄像头。</p>\n<h3 id=\"25-问题：视频输出框不小心一直放大，如何缩小回正常状态？\">2.5 问题：视频输出框不小心一直放大，如何缩小回正常状态？<a href=\"#25-问题：视频输出框不小心一直放大，如何缩小回正常状态？\" title=\"2.5 问题：视频输出框不小心一直放大，如何缩小回正常状态？\"></a></h3><p>&nbsp;&nbsp;&nbsp;&nbsp;解决方法：右击视频输出框-【zoom to fit】</p>\n<h3 id=\"26-问题：识别开始与识别停止开关如何添加？\">2.6 问题：识别开始与识别停止开关如何添加？<a href=\"#26-问题：识别开始与识别停止开关如何添加？\" title=\"2.6 问题：识别开始与识别停止开关如何添加？\"></a></h3><p>​    &nbsp;&nbsp;&nbsp;&nbsp;加个条件语句在开关识别中。</p>\n<h3 id=\"2-7-问题：一个显示暂时图片一个显示实时录像怎么实现？\">2. 7 问题：一个显示暂时图片一个显示实时录像怎么实现？<a href=\"#2-7-问题：一个显示暂时图片一个显示实时录像怎么实现？\" title=\"2. 7 问题：一个显示暂时图片一个显示实时录像怎么实现？\"></a></h3><pre><code>- 学习局部变量的用法，【结构】-【局部变量】右键控件可以【转化成读取】或【转化成写入】，选择好输入输出就可以右键【选择项】选择需要代替的局部变量。\n- 学习定时开启关闭布尔开关类型，布尔开关开启时控制识别，并实时输出，结束时结束字符识别，并结束视频识别。</code></pre>\n<h2 id=\"三、ni-imaqdx例程介绍\">三、NI IMAQdx例程介绍<a href=\"#三、ni-imaqdx例程介绍\" title=\"三、NI IMAQdx例程介绍\"></a></h2><h3 id=\"31-the-acquire-every-image-optimized-performance\">3.1 The Acquire Every Image (Optimized Performance)<a href=\"#31-the-acquire-every-image-optimized-performance\" title=\"3.1 The Acquire Every Image (Optimized Performance)\"></a></h3><p>​    &nbsp;&nbsp;&nbsp;&nbsp;Acquire Every Images（优化性能）示例显示了使用环形采集的基础知识。在VI的框图中更详细地描述了使用此模式的一些相机限制，但是如果可能，建议在性能关键的应用中使用此方法。</p>\n<p>概述：演示如何使用优化性能的环形采集来获取连续图像。</p>\n<p>要求：视觉采集软件</p>\n<p>说明：</p>\n<ol><li><p>选择摄像机名称</p></li><li><p>运行VI</p></li><li><p>增加模拟处理延迟，以查看采集循环没有像相机获取图像那样快速执行时对后面图像和丢失图像的影响。</p></li></ol><h3 id=\"32-the-acquire-every-image\">3.2 The Acquire Every Image<a href=\"#32-the-acquire-every-image\" title=\"3.2 The Acquire Every Image\"></a></h3><p>​    &nbsp;&nbsp;&nbsp;&nbsp;获取每个图像”示例显示了使用抓取获取获取每个图像的基础。抓取将图像数据从驱动程序分配的缓冲区复制到用户分配的缓冲区以供进一步处理。对于性能关键型应用程序，建议尽可能使用“获取每个图像（优化性能）”示例，以避免图像副本的额外开销。优化后的示例确实有一些限制，如VI所述。如果优化后的示例的要求限制过多，则应使用此示例。</p>\n<h3 id=\"33-the-acquire-most-recent-image\">3.3 The Acquire Most Recent Image<a href=\"#33-the-acquire-most-recent-image\" title=\"3.3 The Acquire Most Recent Image\"></a></h3><p>​    &nbsp;&nbsp;&nbsp;&nbsp;获取最新图像示例连续获取图像并使用抓取获取在图像控件中显示图像。它使用上一个新的获取模式来获取最新的图像，以避免等待获取新图像。</p>\n<p>概述：演示如何从相机获取最新的连续图像。</p>\n<p>要求：视觉采集软件</p>\n<h3 id=\"34-the-acquire-most-recent-image-express-vi\">3.4 The Acquire Most Recent Image (Express VI)<a href=\"#34-the-acquire-most-recent-image-express-vi\" title=\"3.4 The Acquire Most Recent Image (Express VI)\"></a></h3><p>&nbsp;&nbsp;&nbsp;&nbsp;获取最新图像（Express VI）示例连续获取图像，并使用Vision Acquisition Express VI在图像控件中显示图像。Express VI使配置获取变得简单，并允许您更改所选相机，或添加新属性或设置以更新，而无需编写任何代码。这个Express VI适合于入门和学习如何从相机获取图像并在LabVIEW中显示图像。</p>\n<p>概述：演示如何使用ExpressVI连续获取图像。</p>\n<p>要求：视觉采集软件</p>\n<p>说明：运行VI</p>\n<h2 id=\"四、控件了解\">四、控件了解<a href=\"#四、控件了解\" title=\"四、控件了解\"></a></h2><h3 id=\"41-roi-descriptor\">4.1 ROI Descriptor<a href=\"#41-roi-descriptor\" title=\"4.1 ROI Descriptor\"></a></h3><h4 id=\"概念\">概念<a href=\"#概念\" title=\"概念\"></a></h4><p><strong>ROI：</strong>RIO是Region Of Interesting的简称，中译为目标区域。这个簇包含两个元素，Global Rectangle和Contours，其中Contours又是一个簇数组，其中的簇包含三个元素（ID,Type，Coordinates）。</p>\n<p><strong>全局矩形Global Rectangle</strong>：包含了所有内部兴趣区域的外接矩形坐标点。一个图像上可能画有多个ROI，而包含这些所有ROI的外接矩形，则为全局矩形。它是一个一维数组。因为这种外接矩形是非旋转矩形，所以只有4个元素，左顶右底（即ROI左上角的X、Y，右下角的X、Y坐标）。经过实际验证，全局矩形的值即使不包含轮廓中的坐标点，处理的函数也会自动将全局矩形变成包含所有的ROI的外接矩形。</p>\n<p><strong>轮廓Contours</strong>：是每个兴趣区域的单独形状，是一维数组。即多个ROI时，可能会有线、矩形、圆、弧等多个形状的ROI，则由轮廓中的数组来表示。每一个形状的ROI为一个数组元素。而这些数组元素则是由另外一个簇表示的，包含了标识、类型、坐标三个元素：</p>\n<p><strong>标识ID</strong>：指定轮廓是ROI边缘的外部或内部区域。这个ID与ROI函数中的Contours Type轮廓类型是同一个变量。只是不同的表示方法而已（这个在NI的视觉中经常见到这样的名称不同但为同一概念的定义）。</p>\n<p> <strong>类型Type</strong>：指定兴趣区域轮廓的具体形状类型。这个在ROI中定义为ROI Type兴趣区域类型，也是同一概念。</p>\n<p><strong>坐标Coordinates</strong>：表示轮廓的在图像中的相对位置。很多ROI形状也只有4个元素，如直线、矩形等，这样的ROI的坐标与全局轮廓还是重合的。而像点ROI，则只有2个坐标，但是全局矩形仍然会有4个坐标。而当使用多段线时，则肯定有大于等于4个坐标点。</p>\n<h2 id=\"五、课设要求\">五、课设要求<a href=\"#五、课设要求\" title=\"五、课设要求\"></a></h2><p>&nbsp;&nbsp;&nbsp;&nbsp;Labview环境下调用摄像头识别视像头实时视频中的印刷体(如印刷于A4纸张上的大写单个黑体字符)如“A”、”B”、”C”、”D”等等。</p>\n<p>Labview面板上需包括:</p>\n<ol><li><p>包括摄像头开启关闭开关</p></li><li><p>识别开始停止开关</p></li><li><p>结果刷新速度设定文本框. (可输入结果刷新速度，例如每1秒输出一次实时识，别结果)</p></li><li><p>摄像内容实时显示控件4)识别结果文本框</p></li><li><p>识别结果所对应的摄像头画面瞬时图片(可选)</p></li><li><p>其他自定义内容(可选)</p></li></ol><h2 id=\"六、完成情况\">六、完成情况<a href=\"#六、完成情况\" title=\"六、完成情况\"></a></h2><h3 id=\"61-识别循环设置模块\">6.1 识别循环设置模块<a href=\"#61-识别循环设置模块\" title=\"6.1 识别循环设置模块\"></a></h3><p>&nbsp;&nbsp;&nbsp;&nbsp;识别循环设置模块采用一个WHILE大循环来循环判定识别开关的状态是否转变，以识别开关的键值来作为条件语句的执行条件，若打开识别开关，则其键值为真。可提前设定好需要识别的时间与显示识别结果的时间，并以平铺式顺序结构来确保子程序图按照从左到右的顺序执行，此部分功能类似布尔开关定时循环跳转变化。当识别开关为真，平铺式顺序结构中第一帧就会开始运行所设定的时间，运行成功后，第二帧开始运行显示识别时间，以此类推。</p>\n<p><img src=\"/2020/06/20/LabVIEW-Notes/识别循环设置模块.png\" class=\"φcy\" alt=\"识别循环设置模块\"></p>\n<h3 id=\"62-摄像头瞬间显示模块\">6.2 摄像头瞬间显示模块<a href=\"#62-摄像头瞬间显示模块\" title=\"6.2 摄像头瞬间显示模块\"></a></h3><p>&nbsp;&nbsp;&nbsp;&nbsp;摄像头瞬间显示模块采用识别循环设置中识别开关的局部变量键值来判断是否要瞬时识别摄像头内容 。流畅显示或者是瞬时显示的时间根据识别循环设置中两个时间来判定。归根结底就是正在识别的布尔开关状态来控制摄像头识别。这样保证在循环内，正在识别中时的摄像头是实时显示的摄像内容，当平铺式顺序结构中正在识别的布尔开关为假时便停止实时显示，开启瞬时显示。<img src=\"/2020/06/20/LabVIEW-Notes/摄像头瞬间显示模.png\" alt=\"摄像头瞬间显示模\"></p>\n<h3 id=\"63-二值化分析模块\">6.3 二值化分析模块<a href=\"#63-二值化分析模块\" title=\"6.3 二值化分析模块\"></a></h3><p>&nbsp;&nbsp;&nbsp;&nbsp;二值化分析模块采用IMAQ中从彩色图像中提取单个平面的模块，实现形成灰度；对图像进行阈值设置，形成红色的图像，128为阈值期间使用的最低像素值，255为阈值期间使用的最高像素值。计算、生成图像的直方图，最终生成黑白的实时监控视频显示。三个图能够实时的对比分析，让人更加准确的抓住所要分析的内容。<img src=\"/2020/06/20/LabVIEW-Notes/二值化分析模块.jpg\" alt=\"二值化分析模块\"></p>\n<h3 id=\"64-拍照保存照片模块\">6.4 拍照保存照片模块<a href=\"#64-拍照保存照片模块\" title=\"6.4 拍照保存照片模块\"></a></h3><p>&nbsp;&nbsp;&nbsp;&nbsp;拍照保存照片模块采用条件语句，主要由保存图片开关控制，将图像以所选格式写入文件。文件名由U64的随机数构成，并且抓拍获取得到图片格式可选。抓拍后图片显示为抓拍后的图片。图片存在所设置的路径当中，可供后期颜色对比分析。<img src=\"/2020/06/20/LabVIEW-Notes/拍照保存照片模块.png\" alt=\"拍照保存照片模块\"></p>\n<h3 id=\"65-识别界面显示\">6.5 识别界面显示<a href=\"#65-识别界面显示\" title=\"6.5 识别界面显示\"></a></h3><p><img src=\"/2020/06/20/LabVIEW-Notes/界面识别.jpg\" class=\"φcy\" alt=\"界面识别\"></p>\n<h3 id=\"66-二值化分析显示\">6.6 二值化分析显示<a href=\"#66-二值化分析显示\" title=\"6.6 二值化分析显示\"></a></h3><p><img src=\"/2020/06/20/LabVIEW-Notes/二值化显示.jpg\" class=\"φcy\" alt=\"二值化显示\"></p>\n","prev":{"title":"Lua学习总结","link":"2020/07/28/Lua学习总结"},"next":{"title":"Air 724 Cat.1使用经历","link":"2020/06/19/Air-724-Cat-1使用经历"},"plink":"http://yoursite.com/2020/06/20/LabVIEW-Notes/"}