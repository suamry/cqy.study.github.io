{"title":"有线电话通信原理及DTMF学习","date":"2020-08-15T14:03:00.000Z","date_formatted":{"ll":"2020年8月15日","L":"2020/08/15","MM-DD":"08-15"},"author":"巧玉","link":"2020/08/15/有线电话通信原理及DTMF学习","comments":true,"tags":["DTMF"],"updated":"2020-11-20T11:44:00.196Z","content":"<p><img src=\"/2020/08/15/%E6%9C%89%E7%BA%BF%E7%94%B5%E8%AF%9D%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E5%8F%8ADTMF%E5%AD%A6%E4%B9%A0/head.png\" class=\"φcy\" alt=\"head\"></p>\n<a id=\"more\"></a>\n\n<h2 id=\"一、简述\">一、简述<a href=\"#一、简述\" title=\"一、简述\"></a></h2><p>在现代生活中固话逐渐被智能机给替代，但是有线报警主机在未升级版本依然走的是CID格式，全部替换老式有线报警主机成本高，大多人会选择在有线报警主机基础上，安装小模块来升级报警通道2G、4G、有线等，但是有线电话报警依然需要保留，并且由有线引申到其他升级通道报警。</p>\n<h2 id=\"二、有线电话通信\">二、有线电话通信<a href=\"#二、有线电话通信\" title=\"二、有线电话通信\"></a></h2><h3 id=\"21-专有名词解释\">2.1 专有名词解释<a href=\"#21-专有名词解释\" title=\"2.1 专有名词解释\"></a></h3><p><strong>CID：</strong>安定宝 (ADEMCO) Contact ID 报警通讯格式，在有线电话网中与报警信号接收器、接警中心之间的一种协议，在国内十分普及。</p>\n<p><strong>DTMF：</strong> 报警信息数据，百度解释：双音多频，由高频群和低频群组成，高低频群各包含4个频率。一个高频信号和一个低频信号叠加组成一个组合信号，代表一个数字。拨号的时候，将号码发出的也是DTMF格式。</p>\n<p><strong>PSTN：</strong> 公共电话交换网。</p>\n<p><strong>PBX：</strong> 电话交换机。</p>\n<p><strong>摘机（提机）：</strong> 固定电话拿起电话机的听筒或按免提。</p>\n<p><strong>拨号音：</strong> 当用户摘机后，系统向电话发出450Hz连续音频信号。</p>\n<p><strong>忙音：</strong>当用户拨打一个正在通话中的号码时，系统向电话机发出450Hz的音频信号，响0.35s停0.35s。</p>\n<p><strong>催挂音：</strong> 通话结束，一方挂机或呼叫失败时，系统向电话发出450Hz的音频信号，响0.7s，停0.7s。</p>\n<p><strong>回铃音：</strong> 拨号一个有效号码，且正在呼叫，被呼叫用户摘机前听到的系统向电话机发出的450Hz音频信号，响1s，停4s，直到接通或挂机。</p>\n<h2 id=\"三、模块解读\">三、模块解读<a href=\"#三、模块解读\" title=\"三、模块解读\"></a></h2><h3 id=\"31-ht9170芯片解读\">3.1 HT9170芯片解读<a href=\"#31-ht9170芯片解读\" title=\"3.1 HT9170芯片解读\"></a></h3><p><code>主要作用：DTMF解码</code></p>\n<p><img src=\"/2020/08/15/%E6%9C%89%E7%BA%BF%E7%94%B5%E8%AF%9D%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E5%8F%8ADTMF%E5%AD%A6%E4%B9%A0/图片1.png\" class=\"φcy\" alt=\"图片1\"></p>\n<div class=\"φcz\"><div class=\"φdb\"><table><thead><tr>\n<th align=\"center\">VP</th><th align=\"center\">运算放大器同相输入</th><th align=\"center\">VDD</th><th align=\"center\">电源，工作电压2.5V~5.5V</th></tr>\n</thead><tbody><tr>\n<td align=\"center\">VN</td><td align=\"center\">运算放大器反相输入</td><td align=\"center\">RT/GT</td><td align=\"center\">音频采集时间和发布时间</td></tr>\n<tr>\n<td align=\"center\">GS</td><td align=\"center\">运算放大器输出端子</td><td align=\"center\">EST</td><td align=\"center\">早起转向输出</td></tr>\n<tr>\n<td align=\"center\">VREF</td><td align=\"center\">参考电压VDD/2</td><td align=\"center\">DV</td><td align=\"center\">接收到DTMF码时为高电平</td></tr>\n<tr>\n<td align=\"center\">INH</td><td align=\"center\">逻辑高</td><td align=\"center\">D3</td><td align=\"center\">接收数据输出</td></tr>\n<tr>\n<td align=\"center\">PWDN</td><td align=\"center\">高，掉电模式</td><td align=\"center\">D2</td><td align=\"center\">接收数据输出</td></tr>\n<tr>\n<td align=\"center\">X1</td><td align=\"center\">晶振3.579545MHz</td><td align=\"center\">D1</td><td align=\"center\">接收数据输出</td></tr>\n<tr>\n<td align=\"center\">X2</td><td align=\"center\">晶振3.579545MHz</td><td align=\"center\">D0</td><td align=\"center\">接收数据输出</td></tr>\n<tr>\n<td align=\"center\">VSS</td><td align=\"center\">负电源，地面</td><td align=\"center\">OE</td><td align=\"center\">D3~D0输出使能，高电平有效</td></tr>\n</tbody></table></div></div><blockquote>\n<p><strong>检测原理</strong></p>\n<ul><li>有DTMF数据时DV脚为高电平</li><li>检测到DV脚为高电平时要将OE脚拉高，使能D0-D3的输出</li><li>接收DTMF的D3-D0数据并解析，解析表格如下：</li><li><img src=\"/2020/08/15/%E6%9C%89%E7%BA%BF%E7%94%B5%E8%AF%9D%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E5%8F%8ADTMF%E5%AD%A6%E4%B9%A0/图片2.png\" alt=\"图片2\"></li></ul></blockquote>\n<h3 id=\"32-mx801解读\">3.2 MX801解读<a href=\"#32-mx801解读\" title=\"3.2 MX801解读\"></a></h3><p><code>主要功能：内部铃流、摘挂机检测</code></p>\n<p>芯片手册中的功能原理框图以及引脚说明图：</p>\n<p><img src=\"/2020/08/15/%E6%9C%89%E7%BA%BF%E7%94%B5%E8%AF%9D%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E5%8F%8ADTMF%E5%AD%A6%E4%B9%A0/图片3.png\" class=\"φcy\" alt=\"图片3\"></p>\n<p><img src=\"/2020/08/15/%E6%9C%89%E7%BA%BF%E7%94%B5%E8%AF%9D%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E5%8F%8ADTMF%E5%AD%A6%E4%B9%A0/图片4.png\" class=\"φcy\"></p>\n<blockquote>\n<p><strong>学习要点</strong></p>\n<ul><li>AIN接724模块的SPK+，AOUT接724模块的麦克风MIC+，能够让4G模块转拨号</li><li>单片机检测SHK脚，摘机高电平</li></ul></blockquote>\n","prev":{"title":"SK-121-4G-AT任务分配","link":"2020/10/21/SK-121P-4G-AT任务分配"},"next":{"title":"Lua学习总结","link":"2020/07/28/Lua学习总结"},"plink":"http://yoursite.com/2020/08/15/有线电话通信原理及DTMF学习/"}